#+TITLE: Theodor Fontane on Wikipedia
#+AUTHOR: Frank Fischer and Robert JÃ¤schke
#+EMAIL:
#+LANGUAGE: en
#+OPTIONS: toc:nil ':t H:5
#+STARTUP: hidestars overview
#+LaTeX_CLASS: scrartcl
#+LaTeX_CLASS_OPTIONS: [a4paper,11pt]

* Preparation

Download and extract [[https://www.mediawiki.org/wiki/Manual:Pywikibot/en][Pywikibot]], a Python library for interacting with Wikipedia:

#+BEGIN_SRC sh
  wget https://tools.wmflabs.org/pywikibot/core_stable.tar.gz
  tar xzf core_stable.tar.gz
#+END_SRC

* "Theodor Fontane" articles in different Wikipedia language editions

#+BEGIN_SRC sh
  python3 core_stable/pwb.py wiki.py --languages "Theodor Fontane" > interwiki.tsv
#+END_SRC

Plot some of the columns:

#+BEGIN_SRC gnuplot :results silent
  reset
  set datafile separator "\t"

  set grid
  set boxwidth 0.5
  set style fill solid
  set xtics rotate by 45 right
  set xlabel 'Wikipedia language edition'

  set term png enhanced size 800,600 font "Arial,10" lw 2

  set out "interwiki_textlen.png"
  set ylabel 'number of characters'
  plot 'interwiki.tsv' using :2:xtic(1) title '' with boxes

  set out "interwiki_contributors.png"
  set ylabel 'number of contributors'
  plot 'interwiki.tsv' using :3:xtic(1) title '' with boxes

  set out "interwiki_revisions.png"
  set ylabel 'number of revisions'
  plot 'interwiki.tsv' using :4:xtic(1) title '' with boxes

  set out "interwiki_backlinks.png"
  set ylabel 'number of backlinks'
  plot 'interwiki.tsv' using :9:xtic(1) title '' with boxes

  set out "interwiki_firstrev.png"
  set ydata time
  # 2002-05-13T13:59:54Z
  set timefmt '%Y-%m-%dT%H:%M:%SZ'
  set format y '%Y'
  set ylabel 'year'
  plot 'interwiki.tsv' using :11:xtic(1) title '' with boxes

#+END_SRC

** text length (wiki markup)

[[interwiki_textlen.png]]

** number of contributors

[[interwiki_contributors.png]]

** number of revisions

[[interwiki_revisions.png]]

** number of backlinks

[[interwiki_backlinks.png]]

** date of the first version of a page

[[interwiki_firstrev.png]]

* Articles of Fontane's works (in the German Wikipedia)

starting point: https://de.wikipedia.org/wiki/Kategorie:Werk_von_Theodor_Fontane

#+BEGIN_SRC sh
  python3 core_stable/pwb.py wiki.py --category "Kategorie:Werk_von_Theodor_Fontane" > works.tsv
#+END_SRC

Plot some of the columns:

#+BEGIN_SRC gnuplot :results silent
  reset
  set datafile separator "\t"

  set grid
  set boxwidth 0.5
  set style fill solid
  set xtics rotate by 45 right
  set xlabel "Fontane's works"

  set term png enhanced size 800,800 font "Arial,10" lw 2

  set out "works_textlen.png"
  set ylabel 'number of characters'
  plot 'works.tsv' using :2:xtic(1) title '' with boxes

  set out "works_contributors.png"
  set ylabel 'number of contributors'
  plot 'works.tsv' using :3:xtic(1) title '' with boxes

  set out "works_revisions.png"
  set ylabel 'number of revisions'
  plot 'works.tsv' using :4:xtic(1) title '' with boxes

  set out "works_backlinks.png"
  set ylabel 'number of backlinks'
  plot 'works.tsv' using :9:xtic(1) title '' with boxes

  set out "works_languages.png"
  set ylabel 'number of language editions'
  plot 'works.tsv' using :7:xtic(1) title '' with boxes

  set out "works_firstrev.png"
  set ydata time
  # 2002-05-13T13:59:54Z
  set timefmt '%Y-%m-%dT%H:%M:%SZ'
  set format y '%Y'
  set ylabel 'year'
  plot 'works.tsv' using :11:xtic(1) title '' with boxes
#+END_SRC


** text length (wiki markup)

[[works_textlen.png]]

** number of contributors

[[works_contributors.png]]

** number of revisions

[[works_revisions.png]]

** number of backlinks

[[works_backlinks.png]]

** date of the first version of a page

[[works_firstrev.png]]

* Contemporaries of Fontane

Download the result of the SPARQL query https://w.wiki/48T as TSV file
[[contemporaries_wikidata.tsv]] and

#+BEGIN_SRC sh
  python3 core_stable/pwb.py wiki.py --file contemporaries_wikidata.tsv > contemporaries.tsv
#+END_SRC

Plot some of the columns:

#+BEGIN_SRC gnuplot :results silent
  reset
  set datafile separator "\t"

  set grid
  set boxwidth 0.5
  set style fill solid
  set xtics rotate by 45 right
  set ylabel "Fontane's contemporaries"

  set term png enhanced size 800,800 font "Arial,10" lw 2

  set out "contemporaries_textlen.png"
  set ylabel 'number of characters'
  plot 'contemporaries.tsv' using :2:xtic(1) title '' with boxes

  set out "contemporaries_contributors.png"
  set ylabel 'number of contributors'
  plot 'contemporaries.tsv' using :3:xtic(1) title '' with boxes

  set out "contemporaries_revisions.png"
  set ylabel 'number of revisions'
  plot 'contemporaries.tsv' using :4:xtic(1) title '' with boxes

  set out "contemporaries_backlinks.png"
  set ylabel 'number of backlinks'
  plot 'contemporaries.tsv' using :9:xtic(1) title '' with boxes

  set out "contemporaries_languages.png"
  set ylabel 'number of language editions'
  plot 'contemporaries.tsv' using :7:xtic(1) title '' with boxes

  set out "contemporaries_firstrev.png"
  set ydata time
  # 2002-05-13T13:59:54Z
  set timefmt '%Y-%m-%dT%H:%M:%SZ'
  set format y '%Y'
  set ylabel 'year'
  plot 'contemporaries.tsv' using :11:xtic(1) title '' with boxes

#+END_SRC

** text length (wiki markup)

[[contemporaries_textlen.png]]

** number of contributors

[[contemporaries_contributors.png]]

** number of revisions

[[contemporaries_revisions.png]]

** number of backlinks

[[contemporaries_backlinks.png]]

** date of the first version of a page

[[contemporaries_firstrev.png]]
